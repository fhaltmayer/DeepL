This is my attempt on getting a heavily compressed cyclegan model on to CoreML and ultimately running on IOS. First step was to compress the model using https://arxiv.org/pdf/2003.08936.pdf. I roughly compressed a Vangogh image filter model using their repo, then converted the model to onnx, hoping that a prebuilt converter would work to get it into coreml/tflite, but  coremltools, mmdnn, onnx2keras, and onnx-tf all failed. Now I am trying to manually convert the onnx model to keras by recreating the architecture and manually transfering weights/biases. 

--Update: Managed to get onnx2keras working wtih a few changes to InstanceNorm, ReflectionPad, and Convolution2dTranspose. Issue with tflite due to Channels first causing a bad graph. TFlite interpretor also seg faults which is worrisome.

--Update 2: For some reason tflite cannot convert the tf.math.Pow operator which is found when calculating the bias and variance in Square_dif which is used in tensorflow_light's instance norm. In order to get around this you can go to the tf/python/ops/nn_impl.py and change the squared_diff into a manual (x-y)(x-y). Ive included the changed file. Ive managed to produce a float16 quantized model and regular model in tflite. Next step is getting it working on swift. 

--Update 3: CoreML is not the route to go, many issues regarding conversion and dealing with RGB, BGR, channel order, etc. Next step is to try tflite model which I know works as I have been able to test the interpreter. 